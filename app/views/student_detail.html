<div class="container-fluid user_edit_permission">
    <div class="row">

        <div class="col-xs-12 inverse header-background">
            <h1 class="page-title">
                {{vm.student.personal.first_name}} {{vm.student.personal.last_name}}
                <div class="divider-vertical hidden-xs"></div>
                <div class="header-title-student-detail">
                    <div class="student-detail-edit"><a href="javascript:void(0)" ui-sref="dashboard.student_edit({id:vm.student_id})" class="uppercase bold">Edit <span class="glyphicon glyphicon-edit"></span></a></div>
                    <div><a href="#" class="uppercase">CHECK FOR UPDATES <span class="glyphicon glyphicon-refresh"></span></a></div>
                    <div>Last Updates: {{vm.student.last_update}}</div>
                </div>

                <div class="pull-right">
                    <a class="btn btn-reverse" ui-sref="dashboard.student">View All Student</a>
                    <a href="{{vm.prev_link}}" ng-show="vm.prev_link" class="btn btn-reverse btn-circle"><span class="glyphicon glyphicon-menu-left"></span></a>
                    <a href="{{vm.next_link}}" ng-show="vm.next_link" class="btn btn-reverse btn-circle"><span class="glyphicon glyphicon-menu-right"></span></a>
                </div>

            </h1>
        </div>

        <div class="clearfix space20"></div>

        <div class="col-lg-offset-2 col-lg-8 col-md-offset-2 col-md-8 col-sm-offset-2 col-sm-8 col-xs-12">
            <div class="row">
                <div class="alert alert-info text-left message" ng-show=vm.message>
                    <a href="#" class="close" data-dismiss="alert" aria-label="close">&times;</a> {{vm.message}}
                </div>
            </div>
        </div>

    </div>
    <div class="row">
        <div class="col-md-offset-1 col-md-2">
            <fieldset>
                <legend>Personal Information</legend>
                <dl>
                    <dt>District ID</dt>
                    <dd>{{vm.student.local_id}}</dd>
                    <dt>Birthday</dt>
                    <dd>{{vm.student.personal.xsre.demographics.birth_date}}</dd>
                    <dt>Race/Ethnicity</dt>
                    <dd>{{vm.student.personal.xsre.demographics.races}}</dd>
                    <dt>Gender</dt>
                    <dd>{{vm.student.personal.xsre.demographics.sex}}</dd>
                    <dt>College Bound</dt>
                    <dd>{{vm.student.personal.college_bound}}</dd>
                </dl>
            </fieldset>
            <fieldset>
                <legend>Personal Contact</legend>
                <dl>
                    <dt>Phone</dt>
                    <dd>{{vm.student.personal.phone}}</dd>
                    <dt>Email</dt>
                    <dd>{{vm.student.personal.email}}</dd>
                    <dt>Address</dt>
                    <dd>{{vm.student.personal.address}}</dd>
                </dl>
            </fieldset>
        </div>
        <div class="col-md-2">
            <fieldset>
                <legend>Emergency Contacts</legend>
                <dl>
                    <dt>Name</dt>
                    <dd>{{vm.student.personal.emergency1.name}}</dd>
                    <dt>Relationship</dt>
                    <dd>{{vm.student.personal.emergency1.relationship}}</dd>
                    <dt>Email</dt>
                    <dd>{{vm.student.personal.emergency1.email}}</dd>
                    <dt>Phone</dt>
                    <dd>{{vm.student.personal.emergency1.phone}}</dd>
                </dl>
                <dl>
                    <dt>Name</dt>
                    <dd>{{vm.student.personal.emergency2.name}}</dd>
                    <dt>Relationship</dt>
                    <dd>{{vm.student.personal.emergency2.relationship}}</dd>
                    <dt>Email</dt>
                    <dd>{{vm.student.personal.emergency2.email}}</dd>
                    <dt>Phone</dt>
                    <dd>{{vm.student.personal.emergency2.phone}}</dd>
                </dl>
            </fieldset>
        </div>
        <div class="col-md-2">
            <fieldset>
                <legend>Assigned Users</legend>
                <dl ng-repeat="person in vm.student.embedded.users">
                    <dt></dt>
                    <dd>{{person.fullname}}</dd>
                </dl>
            </fieldset>
        </div>
        <div class="col-md-2">
            <fieldset>
                <legend>School Information</legend>
                <dl>
                    <dt>Current School</dt>
                    <dd>{{vm.student.personal.xsre.enrollment.school_name}}</dd>
                    <dt>Expected Graduation Year</dt>
                    <dd>{{vm.student.personal.xsre.enrollment.projected_graduation_year}}</dd>
                    <dt>Grade Level</dt>
                    <dd>{{vm.student.personal.xsre.enrollment.grade_level}}</dd>
                </dl>
                <dl>
                    <dt>IEP</dt>
                    <dd>{{vm.student.personal.idea_indicator}}</dd>
                    <dt>s504</dt>
                    <dd>{{vm.student.personal.section_504_status}}</dd>
                    <dt>Free or Reduced Lunch</dt>
                    <dd>{{vm.student.personal.eligibility_status}}</dd>
                </dl>
            </fieldset>
        </div>
        <div class="col-md-2">
            <fieldset>
                <legend>Current Class Schedule {{}}</legend>
                <span ng-repeat ="course in vm.student.transcript.source.transcript_term.courses | orderBy:'timeTablePeriod'">
                    <span class="label label-success" ng-show="course.timeTablePeriod">{{course.timeTablePeriod}}</span><span>{{course.courseTitle}}</span>
                </span>
            </fieldset>
        </div>
    </div>
    <div class="row">
        <div class="col-md-12">
            <ul class="nav nav-tabs nav-justified" role="tablist">
                <li role="presentation" class="active"><a href="javascript:void(0)" data-target="#attendance_behavior" data-toggle="tab" role="tab" aria-controls="attendance_home">Attendance & Behavior</a></li>
                <li role="presentation" ><a href="javascript:void(0)" data-target="#transcript" data-toggle="tab" role="tab" aria-controls="attendance_home">Transcript</a></li>
                <li role="presentation" ><a href="javascript:void(0)" data-target="#program_participation" data-toggle="tab" role="tab" aria-controls="attendance_home">Program Participation</a></li>
                <li role="presentation" ><a href="javascript:void(0)" data-target="#enrollment_history" data-toggle="tab" role="tab" aria-controls="attendance_home">Enrollment History</a></li>
                <li role="presentation" ><a href="javascript:void(0)" data-target="#assessment" data-toggle="tab" role="tab" aria-controls="attendance_home">Assessment</a></li>
                <li role="presentation" ><a href="javascript:void(0)" data-target="#graph" data-toggle="tab" role="tab" aria-controls="attendance_home"><span class="glyphicon glyphicon-stats"></span></a></li>
            </ul>

            <!-- Tab panes -->
            <div class="tab-content">
                <div role="tabpanel" class="tab-pane active" id="attendance_behavior">
                    <div style="display: flex;height: 80px;align-items: center">
                        <div style="flex-grow: 1;text-align: center;width: 30%;">Attendance Dates</div>
                        <div style="flex-grow: 2;text-align: center;display: flex;width: 40%;">
                            <div style="flex-grow: 1">M</div>
                            <div style="flex-grow: 1">T</div>
                            <div style="flex-grow: 1">W</div>
                            <div style="flex-grow: 1">TH</div>
                            <div style="flex-grow: 1">F</div>
                            <div style="flex-grow: 1">SA</div>
                            <div style="flex-grow: 1">S</div>
                        </div>
                        <div style="flex-grow: 1;text-align: center;width: 30%;">Weekly Change</div>
                    </div>
                    <div class="panel-group" id="accordion" role="tablist" aria-multiselectable="true" ng-repeat="student in vm.list_of_details">
                        <div class="panel panel-default">
                            <div ng-click="vm.changeStatus(student,$index)" class="panel-heading" role="tab" data-toggle="collapse" data-target="#tabs-{{$index}}" style="padding:0;display: flex;height: 50px;align-items: center">
                                <div style="flex-grow: 1;text-align: center;width: 30%;">{{student.header.date}}</div>
                                <div style="flex-grow: 2;text-align: center;display: flex;width: 40%;">
                                    <div style="flex-grow: 1" ng-hide="student.status">{{student.header.monday}}</div>
                                    <div style="flex-grow: 1" ng-show="student.status">{{student.header_detail.day.monday.date}}<br/>{{student.header_detail.day.monday.value}}</div>
                                    <div style="flex-grow: 1" ng-hide="student.status">{{student.header.tuesday}}</div>
                                    <div style="flex-grow: 1" ng-show="student.status">{{student.header_detail.day.tuesday.date}}<br/>{{student.header_detail.day.tuesday.value}}</div>
                                    <div style="flex-grow: 1" ng-hide="student.status">{{student.header.wednesday}}</div>
                                    <div style="flex-grow: 1" ng-show="student.status">{{student.header_detail.day.wednesday.date}}<br/>{{student.header_detail.day.wednesday.value}}</div>
                                    <div style="flex-grow: 1" ng-hide="student.status">{{student.header.thursday}}</div>
                                    <div style="flex-grow: 1" ng-show="student.status">{{student.header_detail.day.thursday.date}}<br/>{{student.header_detail.day.thursday.value}}</div>
                                    <div style="flex-grow: 1" ng-hide="student.status">{{student.header.friday}}</div>
                                    <div style="flex-grow: 1" ng-show="student.status">{{student.header_detail.day.friday.date}}<br/>{{student.header_detail.day.friday.value}}</div>
                                    <div style="flex-grow: 1" ng-hide="student.status">{{student.header.saturday}}</div>
                                    <div style="flex-grow: 1" ng-show="student.status">{{student.header_detail.day.saturday.date}}<br/>{{student.header_detail.day.saturday.value}}</div>
                                    <div style="flex-grow: 1" ng-hide="student.status">{{student.header.sunday}}</div>
                                    <div style="flex-grow: 1" ng-show="student.status">{{student.header_detail.day.sunday.date}}<br/>{{student.header_detail.day.sunday.value}}</div>
                                </div>
                                <div style="flex-grow: 1;text-align: center;width: 30%;">{{student.header.weekly_change}}</div>
                            </div>
                            <div id="tabs-{{$index}}" class="panel-collapse collapse" role="tabpanel" aria-labelledby="headingOne" >
                                <div class="panel-body" style="display: flex; padding: 0">
                                    <div style="flex-grow: 1;text-align: center;width: 30%;" >
                                        <div class="text-uppercase detail-item" ng-repeat="period in student.periods track by $index">{{period}}</div>
                                        <div class="detail-item"></div>
                                        <div class="text-uppercase detail-item">Behavior</div>
                                    </div>
                                    <div style="flex-grow: 2;text-align: center;display: flex;width: 40%;">
                                        <div style="flex-grow: 1">
                                            <div style="padding: 0 2px" ng-repeat="detail in student.detail_columns.monday">
                                                <div class="detail-item " ng-class="detail.value !== 'N/A'?detail.value:'n_a'"></div>
                                            </div>
                                            <div style="padding: 0 2px">
                                                <div class="detail-item "></div>
                                            </div>
                                            <div style="padding: 0 2px" ng-repeat="behavior in student.behaviors.monday">
                                                <div class="detail-item n_a"></div>
                                            </div>
                                        </div>
                                        <div style="flex-grow: 1">
                                            <div style="padding: 0 2px" ng-repeat="detail in student.detail_columns.tuesday">
                                                <div class="detail-item n_a"></div>
                                            </div>
                                            <div style="padding: 0 2px">
                                                <div class="detail-item "></div>
                                            </div>
                                            <div style="padding: 0 2px" ng-repeat="behavior in student.behaviors.tuesday">
                                                <div class="detail-item n_a"></div>
                                            </div>
                                        </div>
                                        <div style="flex-grow: 1">
                                            <div style="padding: 0 2px" ng-repeat="detail in student.detail_columns.wednesday">
                                                <div class="detail-item " ng-class="detail.value !== 'N/A'?detail.value:'n_a'"></div>
                                            </div>
                                            <div style="padding: 0 2px">
                                                <div class="detail-item "></div>
                                            </div>
                                            <div style="padding: 0 2px" ng-repeat="behavior in student.behaviors.wednesday">
                                                <div class="detail-item n_a"></div>
                                            </div>
                                        </div>
                                        <div style="flex-grow: 1">
                                            <div style="padding: 0 2px" ng-repeat="detail in student.detail_columns.thursday">
                                                <div class="detail-item " ng-class="detail.value !== 'N/A'?detail.value:'n_a'"></div>
                                            </div>
                                            <div style="padding: 0 2px">
                                                <div class="detail-item "></div>
                                            </div>
                                            <div style="padding: 0 2px" ng-repeat="behavior in student.behaviors.thursday">
                                                <div class="detail-item n_a"></div>
                                            </div>
                                        </div>
                                        <div style="flex-grow: 1">
                                            <div style="padding: 0 2px" ng-repeat="detail in student.detail_columns.friday">
                                                <div class="detail-item " ng-class="detail.value !== 'N/A'?detail.value:'n_a'"></div>
                                            </div>
                                            <div style="padding: 0 2px">
                                                <div class="detail-item "></div>
                                            </div>
                                            <div style="padding: 0 2px" ng-repeat="behavior in student.behaviors.friday">
                                                <div class="detail-item n_a"></div>
                                            </div>
                                        </div>
                                        <div style="flex-grow: 1">
                                            <div style="padding: 0 2px" ng-repeat="detail in student.detail_columns.saturday">
                                                <div class="detail-item " ng-class="detail.value !== 'N/A'?detail.value:'n_a'"></div>
                                            </div>
                                            <div style="padding: 0 2px">
                                                <div class="detail-item "></div>
                                            </div>
                                            <div style="padding: 0 2px" ng-repeat="behavior in student.behaviors.saturday">
                                                <div class="detail-item n_a"></div>
                                            </div>
                                        </div>
                                        <div style="flex-grow: 1">
                                            <div style="padding: 0 2px" ng-repeat="detail in student.detail_columns.sunday">
                                                <div class="detail-item " ng-class="detail.value !== 'N/A'?detail.value:'n_a'"></div>
                                            </div>
                                            <div style="padding: 0 2px">
                                                <div class="detail-item "></div>
                                            </div>
                                            <div style="padding: 0 2px" ng-repeat="behavior in student.behaviors.sunday">
                                                <div class="detail-item n_a"></div>
                                            </div>
                                        </div>
                                    </div>
                                    <div style="flex-grow: 1;text-align: center;width: 30%;">
                                        
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div role="tabpanel" class="tab-pane" id="transcript">
                    <div style="display: flex;">
                        <div style="flex-grow: 1;width:20%;">
                            <dl>
                                <dt>Total Credits</dt>
                                <dd>{{vm.transcript_header.credits}}</dd>
                                <dt>Cumulative GPA</dt>
                                <dd>{{vm.transcript_header.total_cumulative_gpa}}</dd>
                                <dt>Grade Level</dt>
                                <dd>{{vm.transcript_header.grade_level}}</dd>
                            </dl>
                        </div>
                        <div style="flex-grow: 2;width:80%;display: flex;justify-content: space-around;">
                            <div ng-repeat="subject in vm.transcript_header.subject_values" style="width: 12%">
                                <h5 class="text-center text-uppercase">{{subject.name}}<br/>{{subject.value}} {{subject.value == 1 ? 'Credit':'Credits'}}</h5>
                            </div>
                        </div>
                    </div>
                    <div style="display: flex" ng-repeat="high_school in vm.list_high_schools">
                        <div style="flex-grow: 1;width:20%;">
                            {{high_school.school_year}} - {{high_school.session}}
                            <dl>
                                <dt>Credit</dt>
                                <dd>{{vm.transcript_header.credits}}</dd>
                                <dt>Grade Level</dt>
                                <dd>{{vm.transcript_header.total_cumulative_gpa}}</dd>
                            </dl>
                        </div>
                        <div style="flex-grow: 2;width:80%;display: flex;justify-content: space-around;">
                            <div ng-repeat="transcript in high_school.transcripts" style="width: 12%">
                                <div ng-repeat="details in transcript">
                                    <h4>{{details.courseTitle}}</h4>
                                    <hr>
                                    <dl>
                                        <dt></dt>
                                        <dd>{{details.leaCourseId}}</dd>
                                        <dt>Grade</dt>
                                        <dd>{{details.mark}}</dd>
                                        <dt>Grade Level</dt>
                                        <dd>{{details.gradeLevel}}</dd>
                                        <dt>Credits</dt>
                                        <dd>{{details.creditsAttempted == details.creditsEarned ? details.creditsEarned : details.creditsEarned + '/' + details.creditsAttempted}}</dd>
                                    </dl>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div role="tabpanel" class="tab-pane" id="program_participation">
                    program participation
                </div>
                <div role="tabpanel" class="tab-pane" id="enrollment_history">
                    <table class="table table-striped">
                        <thead>
                        <tr>
                            <th class="text-center">
                                School Name
                            </th>
                            <th class="text-center">
                                School Year
                            </th>
                            <th class="text-center">
                                Entry Date
                            </th>
                            <th  class="text-center">
                                Exit Date
                            </th>
                            <th  class="text-center">
                                Grade Level
                            </th>
                            <th  class="text-center">
                                Status
                            </th>
                            <th  class="text-center">
                                Non Promotional Change
                            </th>
                        </tr>
                        </thead>
                        <tbody>
                        <tr ng-repeat="enrollement in vm.student.personal.xsre.other_enrollments">
                            <td class="text-center">{{enrollement.schoolName}}</td>
                            <td class="text-center">{{enrollement.schoolYear}}</td>
                            <td class="text-center">{{enrollement.entryDate}}</td>
                            <td class="text-center">{{enrollement.exitDate ? enrollement.exitDate: 'Present'}}</td>
                            <td class="text-center">{{enrollement.gradeLevel}}</td>
                            <td class="text-center">{{enrollement.enrollmentStatusDescription}}</td>
                            <td class="text-center">
                                <div ng-if="enrollement.nonPromotionalChange === true">
                                    <input type="checkbox"disabled checked>
                                </div>
                            </td>
                        </tr>
                        </tbody>
                    </table>
                </div>
                <div role="tabpanel" class="tab-pane" id="assessment">
                    assessment
                </div>
                <div role="tabpanel" class="tab-pane" id="graph">
                    graph
                </div>
            </div>

        </div>
    </div>
</div>